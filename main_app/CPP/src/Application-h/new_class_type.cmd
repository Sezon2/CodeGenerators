rem //////////////////////////////////////////////////////////////////////////////////////////////////////////
rem 
rem     uApplication.hv‚ÌƒNƒ‰ƒXƒ^ƒCƒv‚ğì¬‚·‚éƒoƒbƒ`
rem 
rem //////////////////////////////////////////////////////////////////////////////////////////////////////////
rem y•K—v‚Èjenkins‘¤‚Ìİ’èz
rem cpp_settings.cmd / app_settings_base.cmd
rem ----------------------------------------------------------------------------------------------------------
rem yÀsŒÀ’è[‚ ‚è] / ˆÈ‰º‚ÌBAT“à‚Å‚Ì‚İ“®ì‰Â”\z
rem Application-h.cmd¦‚±‚±‚Å’è‹`‚µ‚½•Ï”‚ğg‚¤‚½‚ßB
rem ----------------------------------------------------------------------------------------------------------
rem yÀs•û–@z¦–{ƒoƒbƒ`‚É‘Î‚µ‚ÄˆÈ‰º‚ÌƒIƒvƒVƒ‡ƒ“‚ğw’è‚·‚é–‚ªo—ˆ‚Ü‚·B
rem new_class_type.cmd <create_name>
rem <create_name>Fì¬‚·‚éƒNƒ‰ƒXƒ^ƒCƒv–¼
rem //////////////////////////////////////////////////////////////////////////////////////////////////////////

rem ************************************************************************************************
rem š•Ï”’è‹`
rem ************************************************************************************************
set apph_mod1_prgname_=%apph_prgname_%.new_class_type
rem ************************************************************************************************


rem `````````````````````````````````````````````````````
rem «ƒƒCƒ“ˆ—

rem ************************************************************************************************
rem šƒoƒbƒ`‚ÌÀs‚ÉŠÖ‚·‚é—LŒø«‚ÌŠm”F
rem ************************************************************************************************
if "%1"=="" goto Error1
if "%1"=="root" goto Error2
rem ------------------------------------------------------------------------------------------------
if exist "%apph_output_%\%1\." goto Error3
if not exist "%apph_output_%\%AppName%.h" goto Error4
rem ************************************************************************************************

rem ************************************************************************************************
rem šƒNƒ‰ƒXƒ^ƒCƒv’uŠ·—p“Áêƒ^ƒO’è‹`ƒtƒ@ƒCƒ‹‚Ìì¬
rem ************************************************************************************************
if exist "%apph_tmpl_dir_%\tag_include_next_%1.cmd" goto Lbl_Skip_New_ClassType_Tag_Cmd
if not exist "%apph_tmpl_dir_%\tmpl_tag_include_next.cmd" goto Error10
copy %apph_tmpl_dir_%\tmpl_tag_include_next.cmd %apph_tmpl_dir_%\tag_include_next_%1.cmd /Y
rem ------------------------------------------------------------------------------------------------
call %apph_tmpl_dir_%\tag_include_class_type.cmd
set replace_left_=%tag_mfind_%
set replace_right_=%1
mfind /W /Q "/%replace_left_%/%replace_right_%/g" %apph_tmpl_dir_%\tag_include_next_%1.cmd
rem ------------------------------------------------------------------------------------------------
:Lbl_Skip_New_ClassType_Tag_Cmd
rem ************************************************************************************************

rem ************************************************************************************************
rem šƒNƒ‰ƒXƒ^ƒCƒv‚Ìì¬
rem ************************************************************************************************
if not exist "%apph_output_%\%1\." mkdir %apph_output_%\%1
rem ------------------------------------------------------------------------------------------------
call %apph_tmpl_dir_%\tag_include.cmd
set replace_left_=\/\/%tag_mfind_%
call %apph_tmpl_dir_%\tag_include_next_%1.cmd
set replace_right_=\/\/%tag_mfind_%\n\n{__join__}
mfind /W /Q "/%replace_left_%/%replace_right_%/g" %apph_output_%\%AppName%.h
rem --------------------------------------------------------
set replace_left_={__join__}
call %apph_tmpl_dir_%\tag_include.cmd
set replace_right_=\/\/%tag_mfind_%
mfind /W /Q "/%replace_left_%/%replace_right_%/g" %apph_output_%\%AppName%.h
rem ------------------------------------------------------------------------------------------------
goto LblFinish
rem ************************************************************************************************


rem `````````````````````````````````````````````````````
rem «I—¹ˆ—

rem ************************************************************************************************
rem šŠ®—¹ƒƒbƒZ[ƒW
rem ************************************************************************************************
:LblFinish
rem echo [%apph_prgname_%]_u%AppName%.hvì¬Š®—¹B
exit /b 0
rem ************************************************************************************************


rem `````````````````````````````````````````````````````
rem «ƒGƒ‰[ˆ—

rem ************************************************************************************************
rem šƒGƒ‰[ƒƒbƒZ[ƒW
rem ************************************************************************************************
:Error1
echo [%apph_mod1_prgname_%]_[Error]ƒ‚ƒWƒ…[ƒ‹Àsƒpƒ‰ƒ[ƒ^‚ÍÈ—ª‚Å‚«‚Ü‚¹‚ñB
echo [%apph_mod1_prgname_%]_«–â‘è‚Ìƒpƒ‰ƒ[ƒ^«
if "%1"=="" echo [%apph_mod1_prgname_%]_[Param1F%1]
exit /b -1
rem ------------------------------------------------------------------------------------------------
:Error2
echo [%apph_mod1_prgname_%]_[Error]ƒAƒvƒŠƒP[ƒVƒ‡ƒ“’¼‰ºƒ^ƒCƒv‚Ìì¬‚Í–¢‘Î‰‚Å‚·B
rem ‚Æ‚è‚ ‚¦‚¸Œ»ó‚ÍuApplication-h.cmdv“à‚Åì‚é‚Ì‚Å‘Î‰‚µ‚È‚¢B
exit /b -1
rem ------------------------------------------------------------------------------------------------
:Error3
echo [%apph_mod1_prgname_%]_[Warning]ƒNƒ‰ƒXƒ^ƒCƒvu%1v‚Íì¬Ï‚İ‚Å‚·B
exit /b 1
rem ------------------------------------------------------------------------------------------------
:Error4
echo [%apph_mod1_prgname_%]_[Error]’Ç‹L‘ÎÛ‚Ìƒtƒ@ƒCƒ‹‚ªŒ©‚Â‚©‚è‚Ü‚¹‚ñB
echo [%apph_mod1_prgname_%]_[•K—v‚Èƒtƒ@ƒCƒ‹F%apph_output_%\%AppName%.h]
exit /b -1
rem ------------------------------------------------------------------------------------------------
:Error10
echo [%apph_mod1_prgname_%]_[Error]“Áêƒ^ƒOì¬—p‚Ìƒeƒ“ƒvƒŒ[ƒgCMDƒtƒ@ƒCƒ‹‚ª‚ ‚è‚Ü‚¹‚ñB
echo [%apph_mod1_prgname_%]_[•K—v‚Èƒtƒ@ƒCƒ‹F%apph_tmpl_dir_%\tmpl_tag_include_next.cmd]
exit /b -1
rem ************************************************************************************************

rem //////////////////////////////////////////////////////////////////////////////////////////////////////////
